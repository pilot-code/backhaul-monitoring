# اسکریپت نصب و مانیتورینگ Backhaul

این اسکریپت برای نصب و مانیتورینگ حرفه‌ای سرویس Backhaul طراحی شده و مناسب سرورهای ایران و خارج است.  

✅ قابلیت‌ها:

- نصب کامل Backhaul روی سرور ایران یا خارج
- راه‌اندازی و پیکربندی کامل سرویس systemd
- مانیتورینگ هوشمند با قابلیت:
  - بررسی وضعیت سرویس (`systemctl is-active`)
  - بررسی ping به مقصد
  - بررسی لاگ‌های بک‌هال برای خطاهای مهم
  - ریستارت خودکار سرویس در صورت تشخیص مشکل
  - reboot خودکار پس از ۳ بار failure متوالی
  - reboot خودکار در صورت وجود فایل `/var/run/reboot-required` هر ۱۲ ساعت
  - محدودسازی لاگ مانیتورینگ به حداکثر ۵۰ خط برای جلوگیری از رشد غیرقابل کنترل فایل‌ها

- از کاربر در زمان نصب مانیتورینگ می‌پرسد:
  - آیا این سرور "ایران" است یا "خارج"؟
  - اگر ایران باشد → تست‌ها روی 127.0.0.1 انجام می‌شود
  - اگر خارج باشد → IP واقعی سرور ایران و پورت گرفته می‌شود

- دارای گزینه‌ی Uninstall برای پاکسازی کامل تمام فایل‌ها، سرویس‌ها و لاگ‌ها
توجه کنید که نصب مانیتورینگ بدون نصب بکهال روی سرور شما امکان پذیر نیست و این نسخه با همین ورژن بکهال میبایست نصب گردد

نصب -----------
---
سکریپت زیر را در سرور خود (دبیان یا اوبونتو اجرا کنید)

```
bash <(curl -Ls https://raw.githubusercontent.com/pilot-code/backhaul-monitoring/main/install2.sh)
```
ورژن دوم (با ورژن قبلی سازگاری ندارد / پیشنهادی / قابلیت مالتی سرویس و مالتی سرور)

```
bash <(curl -Ls https://raw.githubusercontent.com/pilot-code/backhaul-monitoring/main/final.sh)
```

💡 ساده، هوشمند و بهینه برای پایش و مدیریت حرفه‌ای تونل Backhaul شما!

برای پشتیبانی و سوالات:
https://t.me/bestpinginfo
